@page "/search"


@attribute [Authorize]

<PageTitle>Search</PageTitle>
<RadzenAlert AllowClose="false" AlertStyle="AlertStyle.Warning" Variant="Variant.Flat" Shade="Shade.Lighter">
    Requires PopUp permissions. For more details <a href="" @onclick="@PopupWarning" @onclick:preventDefault >Click here!</a>
</RadzenAlert>
<RadzenRow>
    <RadzenColumn Size="12">
        <RadzenText Text="Search" TextStyle="TextStyle.H3" TagName="TagName.H1" />
    </RadzenColumn>
</RadzenRow>
<RadzenTextBox Placeholder="Search..." @bind-Value=searchText Style="width: 80%"></RadzenTextBox>
<RadzenSpeechToTextButton Change="@(args => OnSpeechCaptured(args, true, "SpeechtoToSearch"))" Style="height: 40px; background-color: #598087; color: #ffffff" />
<RadzenButton Style="width: 100px; height: 40px" Text="Search" Click="@SearchButton"></RadzenButton>
<RadzenDropDown @bind-Value=@DropDownValue Data=@DropDownTeams Style="width: 110px; height: 40px" />


<RadzenCheckBoxList @bind-Value=@Values TValue="int" Change=@(args => Values = args) Style="margin-bottom: 50px">
    <Items>
        <RadzenCheckBoxListItem Value="1" Text="ICM"></RadzenCheckBoxListItem>
        <RadzenCheckBoxListItem Value="2" Text="Azure DevOps Work Items"></RadzenCheckBoxListItem>
        <RadzenCheckBoxListItem Value="3" Text="Azure DevOps Wiki"></RadzenCheckBoxListItem>
        <RadzenCheckBoxListItem Value="4" Text="Azure DevOps Code"></RadzenCheckBoxListItem>
        <RadzenCheckBoxListItem Disabled=true Value="5" Text="DFM (TBD)"></RadzenCheckBoxListItem>
        <RadzenCheckBoxListItem Disabled=true Value="6" Text="AVA (TBD)"></RadzenCheckBoxListItem>
        <RadzenCheckBoxListItem Disabled=true Value="7" Text="OUTLOOK (TBD)"></RadzenCheckBoxListItem>
    </Items>
</RadzenCheckBoxList>

<RadzenCard>
<RadzenStack Orientation="Orientation.Horizontal" AlignItems="AlignItems.End" Gap="0.5rem" Class="rz-p-2" >
        <RadzenCheckBox @bind-Value="@allowVirtualization" Name="allowVirtualization" Style="margin-left: auto; margin-right: 0" />
        <RadzenLabel Text="Allow Pagination" Component="allowVirtualization" Style="margin-left: 0; margin-right: 0" />
</RadzenStack>

<RadzenDataList AllowVirtualization=@allowVirtualization Style="@(allowVirtualization ? "height:800px;overflow:auto;" : "")"
                WrapItems="@(!allowVirtualization)" AllowPaging="@(allowVirtualization)"
                Data="@items" TItem="Models.SearchItem" PageSize="5" PagerHorizontalAlign="HorizontalAlign.Left" ShowPagingSummary="true">
    <Template Context="items">
        <RadzenCard Style="width: 100%; padding: 0;">
            <RadzenRow Gap="0">
                <RadzenColumn Size="10" SizeLG="10" Class="rz-p-4 product-title">
                    <RadzenText TextStyle="TextStyle.H6" TagName="TagName.H5" class="rz-color-secondary">@(items.SearchText)</RadzenText>
                    </RadzenColumn>
                    <RadzenColumn Size="1" SizeLG="1" Class="rz-p-4">
                        <RadzenButton Text="Search" Style="width: 100%" Click="@HistorySearch"/>
                    </RadzenColumn>
                    <RadzenColumn Size="1" SizeLG="1" Class="rz-p-4">
                        <RadzenButton Text="Edit" Style="width: 100%" />
                    </RadzenColumn>
                </RadzenRow>
            </RadzenCard>
        </Template>
    </RadzenDataList>
</RadzenCard>

<style>
    .product-title {
        min-height: 72px;
        background-color: var(--rz-secondary-lighter);
    }

    .price-badge {
        font-size: 16px;
        font-weight: bold;
        line-height: 20px;
        padding: 8px;
    }
</style>

